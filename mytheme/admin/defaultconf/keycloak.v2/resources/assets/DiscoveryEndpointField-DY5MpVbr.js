import{jsxs as g,Fragment as C,jsx as d}from"react/jsx-runtime";import{useState as y,useMemo as F}from"react";import{u as I,a as x,b5 as T,a_ as k,a$ as H,aR as S,Q as j,dC as P}from"./main-hZIJIVx9.js";const f=(r,t,i={})=>{if(!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let a,e,l=[];return function(...u){return new Promise(s=>{const n=i.before&&!e;clearTimeout(e),e=setTimeout(()=>{e=null;const p=i.before?a:r.apply(this,u);for(s of l)s(p);l=[]},t),n?(a=r.apply(this,u),s(a)):l.push(s)})}};f.promise=r=>{let t;return async function(...i){if(t)return t;try{return t=r.apply(this,i),await t}finally{t=void 0}}};const L=({id:r,fileUpload:t,children:i})=>{const{adminClient:a}=I(),{t:e}=x(),{setValue:l,clearErrors:u,formState:{errors:s}}=T(),[n,p]=y(!0),[v,m]=y(!1),[E,b]=y(),h=c=>{Object.keys(c).map(o=>l(`config.${o}`,c[o]))},D=async c=>{m(!0);try{const o=await a.identityProviders.importFromUrl({providerId:r,fromUrl:c});h(o),b(o)}catch(o){return o.message}finally{m(!1)}},w=F(()=>f(D,1e3),[]);return g(C,{children:[d(k,{label:e(r==="oidc"?"useDiscoveryEndpoint":"useEntityDescriptor"),fieldId:"kc-discovery-endpoint",labelIcon:d(H,{helpText:e(r==="oidc"?"useDiscoveryEndpointHelp":"useEntityDescriptorHelp"),fieldLabelId:"discoveryEndpoint"}),children:d(S,{id:"kc-discovery-endpoint-switch",label:e("on"),labelOff:e("off"),isChecked:n,onChange:(c,o)=>{u("discoveryError"),p(o)},"aria-label":e(r==="oidc"?"useDiscoveryEndpoint":"useEntityDescriptor")})}),n&&d(j,{name:"discoveryEndpoint",label:e(r==="oidc"?"discoveryEndpoint":"samlEntityDescriptor"),labelIcon:e(r==="oidc"?"discoveryEndpointHelp":"samlEntityDescriptorHelp"),type:"url",placeholder:r==="oidc"?"https://hostname/realms/master/.well-known/openid-configuration":"",validated:s.discoveryError||s.discoveryEndpoint?"error":E?"success":"default",customIcon:v?d(P,{isInline:!0}):void 0,rules:{required:e("required"),validate:c=>w(c)}}),!n&&t,n&&!s.discoveryError&&i(!0),!n&&i(!1)]})};export{L as D};
//# sourceMappingURL=DiscoveryEndpointField-DY5MpVbr.js.map

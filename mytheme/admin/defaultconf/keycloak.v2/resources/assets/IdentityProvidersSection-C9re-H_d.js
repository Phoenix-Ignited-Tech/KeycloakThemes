import{jsxs as l,Fragment as u,jsx as a}from"react/jsx-runtime";import{ds as U,dL as Y,dM as X,u as _,a as v,b as q,c as b,d as J,$ as Q,C as W,B as w,j as Z,bm as ee,P as ae,aX as A,aL as L,aM as x,ct as te,b6 as ie,b7 as z,dN as re,aY as ne,aP as y,cT as se,aA as de,aB as oe,aC as le,h as ce,cM as me,s as pe,L as K,dI as he,cI as ge,db as ue,dO as B,dP as ye,D as fe}from"./main-hZIJIVx9.js";import{useState as m,Fragment as ve}from"react";import{u as be}from"./ConfirmDialog-BClP8m2C.js";import{G as Ce,C as Ie}from"./ClickableCard-2xsFmgg3.js";import{V as Pe}from"./ViewHeader-DxK8RzXz.js";import{M as ke}from"./ManageOrderDialog-Dl6-UDyO.js";import{b as Oe,s as f}from"./sortBy-Dp9zHTFo.js";import"react-dom";import"./Droppable-CwICnup7.js";import"./DataListItemRow-B1CYYhSa.js";function De(e,t,r,s){for(var d=-1,o=e==null?0:e.length;++d<o;){var c=e[d];t(s,c,r(c),e)}return s}function Se(e,t,r,s){return Oe(e,function(d,o,c){t(s,d,r(d),c)}),s}function we(e,t){return function(r,s){var d=Y(r)?De:Se,o={};return d(r,e,U(s),o)}}var Ae=Object.prototype,Le=Ae.hasOwnProperty,xe=we(function(e,t,r){Le.call(e,r)?e[r].push(t):X(e,r,[t])});const ze=e=>{const{t}=v(),{realm:r}=b();return l(K,{to:he({realm:r,providerId:e.providerId,alias:e.alias,tab:"settings"}),children:[e.displayName||e.alias,!e.enabled&&a(ge,{isRead:!0,className:"pf-v5-u-ml-sm",children:t("disabled")},`${e.providerId}-disabled`)]},e.providerId)},Be=e=>{const{t}=v(),{realm:r}=b();return e?.organizationId?a(K,{to:ue({realm:r,id:e.organizationId,tab:"identityProviders"}),children:t("organization")},e.providerId):"â€”"};function He(){const{adminClient:e}=_(),{t}=v(),r=xe(q().identityProviders,"groupName"),{realm:s}=b(),d=J(),[o,c]=m(0),p=()=>c(o+1),[g,C]=m(!1),[I,P]=m(!1),[T,k]=m(!1),[h,F]=m(!1),[O,N]=m(),{addAlert:V,addError:j}=Q();W(async()=>e.identityProviders.find({max:1}),i=>{F(i.length===1)},[o]);const M=async(i,n,D)=>{const S={first:i,max:n,realmOnly:g};D&&(S.search=D);const H=await e.identityProviders.find(S);return f(H,"alias")},R=i=>d(B({realm:s,providerId:i})),E=()=>Object.keys(r).map(i=>a(ye,{label:i,children:f(r[i],"name").map(n=>a(fe,{value:n.id,component:"a","data-testid":n.id,onClick:()=>d(B({realm:s,providerId:n.id})),children:n.name},n.id))},i)),[G,$]=be({titleKey:"deleteProvider",messageKey:t("deleteConfirm",{provider:O?.alias}),continueButtonLabel:"delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{await e.identityProviders.del({alias:O.alias}),p(),V(t("deletedSuccessIdentityProvider"),Z.success)}catch(i){j("deleteErrorIdentityProvider",i)}}});return l(u,{children:[a($,{}),T&&a(ke,{hideRealmBasedIdps:g,onClose:()=>{k(!1),p()}}),a(Pe,{titleKey:"identityProviders",subKey:"listExplain",helpUrl:ee.identityProvidersUrl}),l(ae,{variant:h?"light":"default",className:h?"pf-v5-u-p-0":"",children:[!h&&l(u,{children:[a(A,{children:a(L,{component:x.p,children:t("getStarted")})}),Object.keys(r).map(i=>l(ve,{children:[a(A,{children:l(L,{className:"pf-v5-u-mt-lg",component:x.h2,children:[i,":"]})}),a("hr",{className:"pf-v5-u-mb-lg"}),a(Ce,{hasGutter:!0,children:f(r[i],"name").map(n=>a(Ie,{"data-testid":`${n.id}-card`,onClick:()=>R(n.id),children:a(te,{children:l(ie,{hasGutter:!0,children:[a(z,{children:a(re,{icon:n.id})}),a(z,{isFilled:!0,children:n.name})]})})},n.id))})]},i))]}),h&&a(ne,{loader:M,isPaginated:!0,ariaLabelKey:"identityProviders",searchPlaceholderKey:"searchForProvider",toolbarItem:l(u,{children:[a(y,{alignSelf:"center",children:a(se,{label:t("hideOrganizationLinkedIdps"),id:"hideOrganizationLinkedIdps","data-testid":"hideOrganizationLinkedIdps",isChecked:g,onChange:(i,n)=>{C(n),p()}})}),a(y,{children:a(de,{"data-testid":"addProviderDropdown",onOpenChange:i=>P(i),toggle:i=>a(oe,{ref:i,onClick:()=>P(!I),variant:"primary",children:t("addProvider")}),isOpen:I,children:a(le,{children:E()})})}),a(y,{children:a(ce,{"data-testid":"manageDisplayOrder",variant:"link",onClick:()=>k(!0),children:t("manageDisplayOrder")})})]}),actions:[{title:t("delete"),onRowClick:i=>{N(i),G()}}],columns:[{name:"alias",displayKey:"name",cellRenderer:ze},{name:"providerId",displayKey:"providerDetails",cellFormatters:[me()]},{name:"organizationId",displayKey:"linkedOrganization",cellRenderer:Be}],emptyState:a(pe,{message:t("identityProviders"),instructions:t("emptyRealmBasedIdps"),isSearchVariant:!0,secondaryActions:[{text:t("clearAllFilters"),onClick:()=>{C(!1),p()},type:w.link}]})},o)]})]})}export{He as default};
//# sourceMappingURL=IdentityProvidersSection-C9re-H_d.js.map

import{jsxs as n,Fragment as C,jsx as a}from"react/jsx-runtime";import{u as v,a as b,d as y,c as w,f as S,$ as A,P as T,F as x,Q as j,A as E,X as V,h as I,L as P,bJ as $,aE as k,aT as L,aU as O,aV as U,aF as H,j as K,bK as N}from"./main-hZIJIVx9.js";import{useState as X}from"react";import{F as z}from"./FormAccess-DIV7UK1Y.js";import{F as D}from"./FileUploadForm-Tqz1ZjTZ.js";import{V as J}from"./ViewHeader-DxK8RzXz.js";import{C as Q,a as W}from"./ClientDescription-Cs94Q_ZT.js";import{L as B}from"./CodeEditor-BZUGCa3z.js";import"react-dom";import"./copy-icon-Cy7M-mD5.js";import"./FileUpload-DI2GSZLL.js";import"./SwitchControl-CuqH9Ng4.js";const G=r=>r.match(/(<.[^(><.)]+>)/g);function ie(){const{adminClient:r}=v(),{t:s}=b(),c=y(),{realm:o}=w(),i=S(),{handleSubmit:m,setValue:d,formState:p}=i,[u,h]=X({}),{addAlert:f,addError:l}=A(),g=async t=>{try{const e=await F(t);k(e,d),h(e)}catch(e){l("importParseError",e)}};async function F(t){if(!G(t))return JSON.parse(t);const e=await L(`${U(r.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:t,headers:O(await r.getAccessToken())});if(!e.ok)throw new Error(`Server responded with invalid status: ${e.statusText}`);return e.json()}return n(C,{children:[a(J,{titleKey:"importClient",subKey:"clientsExplain"}),a(T,{variant:"light",children:a(z,{isHorizontal:!0,onSubmit:m(async t=>{try{const e=await r.clients.create({...u,...H({...t,attributes:t.attributes||{}})});f(s("clientImportSuccess"),K.success),c(N({realm:o,clientId:e.id,tab:"settings"}))}catch(e){l("clientImportError",e)}}),role:"manage-clients",children:n(x,{...i,children:[a(D,{id:"realm-file",language:B.json,extension:".json,.xml",helpText:s("helpFileUploadClient"),onChange:g}),a(Q,{hasConfigureAccess:!0}),a(j,{name:"protocol",label:s("type"),readOnly:!0}),a(W,{unWrap:!0}),n(E,{children:[a(V,{formState:p,allowInvalid:!0,allowNonDirty:!0,children:s("save")}),a(I,{variant:"link",component:t=>a(P,{...t,to:$({realm:o})}),children:s("cancel")})]})]})})})]})}export{ie as default};
//# sourceMappingURL=ImportForm-B97kkhww.js.map

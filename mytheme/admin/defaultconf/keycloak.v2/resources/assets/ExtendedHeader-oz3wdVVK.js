import{jsxs as $,Fragment as D,jsx as n}from"react/jsx-runtime";import{u as E,a as b,e as w,$ as x,b5 as A,aZ as F,j as a,D as c,bd as P}from"./main-hZIJIVx9.js";import{u}from"./ConfirmDialog-BClP8m2C.js";import{H as K}from"./SettingsCache-DGmyWWgw.js";const N=({provider:m,editMode:d,save:U,noDivider:g=!1})=>{const{adminClient:i}=E(),{t:s}=b(),{id:r}=w(),{addAlert:o,addError:t}=x(),{control:y}=A(),l=F({name:"config.importEnabled",control:y,defaultValue:["true"]})[0],[f,p]=u({titleKey:"userFedUnlinkUsersConfirmTitle",messageKey:"userFedUnlinkUsersConfirm",continueButtonLabel:"unlinkUsers",onConfirm:()=>S()}),[v,C]=u({titleKey:s("removeImportedUsers"),messageKey:s("removeImportedUsersMessage"),continueButtonLabel:"remove",onConfirm:async()=>{try{h(),o(s("removeImportedUsersSuccess"),a.success)}catch(e){t("removeImportedUsersError",e)}}}),h=async()=>{try{r&&await i.userStorageProvider.removeImportedUsers({id:r}),o(s("removeImportedUsersSuccess"),a.success)}catch(e){t("removeImportedUsersError",e)}},k=async()=>{try{if(r){const e=await i.userStorageProvider.sync({id:r,action:"triggerChangedUsersSync"});e.ignored?o(`${e.status}.`,a.warning):o(s("syncUsersSuccess")+`${e.added} users added, ${e.updated} users updated, ${e.removed} users removed, ${e.failed} users failed.`,a.success)}}catch(e){t("syncUsersError",e)}},I=async()=>{try{if(r){const e=await i.userStorageProvider.sync({id:r,action:"triggerFullSync"});e.ignored?o(`${e.status}.`,a.warning):o(s("syncUsersSuccess")+`${e.added} users added, ${e.updated} users updated, ${e.removed} users removed, ${e.failed} users failed.`,a.success)}}catch(e){t("syncUsersError",e)}},S=async()=>{try{r&&await i.userStorageProvider.unlinkUsers({id:r}),o(s("unlinkUsersSuccess"),a.success)}catch(e){t("unlinkUsersError",e)}};return $(D,{children:[n(p,{}),n(C,{}),n(K,{provider:m,noDivider:g,save:U,dropdownItems:[n(c,{onClick:k,isDisabled:l==="false",children:s("syncChangedUsers")},"sync"),n(c,{onClick:I,isDisabled:l==="false",children:s("syncAllUsers")},"syncall"),n(c,{isDisabled:d?d.includes("UNSYNCED"):!1,onClick:f,children:s("unlinkUsers")},"unlink"),n(c,{onClick:v,children:s("removeImported")},"remove"),n(P,{},"separator")]})]})};export{N as E};
//# sourceMappingURL=ExtendedHeader-oz3wdVVK.js.map

import{jsxs as c,jsx as a}from"react/jsx-runtime";import{a as P,c as k,aZ as C,F as S,Q as p,a_ as g,a$ as h,b0 as m,aR as f,W as F,u as I,f as A,d as H,$ as T,C as N,P as v,r as R,A as q,h as w,eZ as L,j as D}from"./main-hZIJIVx9.js";import{u as E}from"./useParams-tGf6FJmU.js";import{useEffect as V}from"react";import{F as $}from"./FormAccess-DIV7UK1Y.js";import{W as x,H as O,S as U}from"./SettingsCache-DGmyWWgw.js";import{i as _}from"./isEqual-BKyM3i3m.js";import"react-dom";import"./copy-icon-Cy7M-mD5.js";import"./ConfirmDialog-BClP8m2C.js";import"./ViewHeader-DxK8RzXz.js";import"./useToggle-K3Kx99tM.js";const K=({form:r,showSectionHeading:s=!1,showSectionDescription:i=!1})=>{const{t:e}=P(),{realm:u,realmRepresentation:o}=k(),b=C({control:r.control,name:"config.allowPasswordAuthentication"});return V(()=>r.setValue("parentId",o?.id),[]),c(S,{...r,children:[s&&a(x,{title:e("requiredSettings"),description:e("kerberosRequiredSettingsDescription"),showDescription:i}),c($,{role:"manage-realm",isHorizontal:!0,children:[a("input",{type:"hidden",defaultValue:"kerberos",...r.register("providerId")}),a("input",{type:"hidden",defaultValue:"org.keycloak.storage.UserStorageProvider",...r.register("providerType")}),a("input",{type:"hidden",defaultValue:u,...r.register("parentId")}),a(p,{name:"name",label:e("uiDisplayName"),labelIcon:e("uiDisplayNameHelp"),rules:{required:e("validateName")}}),a(p,{name:"config.kerberosRealm.0",label:e("kerberosRealm"),labelIcon:e("kerberosRealmHelp"),rules:{required:e("validateRealm")}}),a(p,{name:"config.serverPrincipal.0",label:e("serverPrincipal"),labelIcon:e("serverPrincipalHelp"),rules:{required:e("validateServerPrincipal")}}),a(p,{name:"config.keyTab.0",label:e("keyTab"),labelIcon:e("keyTabHelp"),rules:{required:e("validateKeyTab")}}),a(g,{label:e("debug"),labelIcon:a(h,{helpText:e("debugHelp"),fieldLabelId:"debug"}),fieldId:"kc-debug",hasNoPaddingTop:!0,children:a(m,{name:"config.debug",defaultValue:["false"],control:r.control,render:({field:t})=>a(f,{id:"kc-debug","data-testid":"debug",onChange:(d,l)=>t.onChange([`${l}`]),isChecked:t.value?.[0]==="true",label:e("on"),labelOff:e("off"),"aria-label":e("debug")})})}),a(g,{label:e("allowPasswordAuthentication"),labelIcon:a(h,{helpText:e("allowPasswordAuthenticationHelp"),fieldLabelId:"allowPasswordAuthentication"}),fieldId:"kc-allow-password-authentication",hasNoPaddingTop:!0,children:a(m,{name:"config.allowPasswordAuthentication",defaultValue:["false"],control:r.control,render:({field:t})=>a(f,{id:"kc-allow-password-authentication","data-testid":"allow-password-authentication",onChange:(d,l)=>t.onChange([`${l}`]),isChecked:t.value?.[0]==="true",label:e("on"),labelOff:e("off"),"aria-label":e("allowPasswordAuthentication")})})}),_(b,["true"])?a(F,{name:"config.editMode[0]",label:e("editMode"),labelIcon:e("editModeKerberosHelp"),controller:{rules:{required:e("required")},defaultValue:"READ_ONLY"},options:["READ_ONLY","UNSYNCED"]}):null,a(g,{label:e("updateFirstLogin"),labelIcon:a(h,{helpText:e("updateFirstLoginHelp"),fieldLabelId:"updateFirstLogin"}),fieldId:"kc-update-first-login",hasNoPaddingTop:!0,children:a(m,{name:"config.updateProfileFirstLogin",defaultValue:["false"],control:r.control,render:({field:t})=>a(f,{id:"kc-update-first-login","data-testid":"update-first-login",onChange:(d,l)=>t.onChange([`${l}`]),isChecked:t.value?.[0]==="true",label:e("on"),labelOff:e("off"),"aria-label":e("updateFirstLogin")})})})]})]})};function ae(){const{adminClient:r}=I(),{t:s}=P(),i=A({mode:"onChange"}),e=H(),{realm:u}=k(),{id:o}=E(),{addAlert:b,addError:t}=T();N(async()=>{if(o)return r.components.findOne({id:o})},n=>{if(n)d(n);else if(o)throw new Error(s("notFound"))},[]);const d=n=>{i.reset({...n})},l=async n=>{try{o?await r.components.update({id:o},n):(await r.components.create(n),e(`/${u}/user-federation`)),d(n),b(s(o?"userProviderSaveSuccess":"createUserProviderSuccess"),D.success)}catch(y){t(o?"userProviderSaveError":"createUserProviderError",y)}};return c(S,{...i,children:[a(O,{provider:"Kerberos",save:()=>i.handleSubmit(l)()}),a(v,{variant:"light",children:a(K,{form:i,showSectionHeading:!0})}),c(v,{variant:"light",isFilled:!0,children:[a(U,{form:i,showSectionHeading:!0}),a(R,{onSubmit:i.handleSubmit(l),children:c(q,{children:[a(w,{isDisabled:!i.formState.isDirty,variant:"primary",type:"submit","data-testid":"kerberos-save",children:s("save")}),a(w,{variant:"link",onClick:()=>e(L({realm:u})),"data-testid":"kerberos-cancel",children:s("cancel")})]})})]})]})}export{ae as default};
//# sourceMappingURL=UserFederationKerberosSettings-Cwd_LUJr.js.map

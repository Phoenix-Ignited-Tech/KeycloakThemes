import{jsx as a,jsxs as l,Fragment as T}from"react/jsx-runtime";import{useEffect as V}from"react";import{a as k,f as E,c as A,bz as L,bA as O,bB as N,aZ as g,bC as n,aE as P,F as W,Q as c,aD as S,W as h,A as j,X as q,h as z,L as B,bo as Q}from"./main-hZIJIVx9.js";import{g as R}from"./utils-C-TUnOch.js";import{D as i}from"./SwitchControl-CuqH9Ng4.js";import{b as F}from"./ClientScopeTypes-AzIBTaPZ.js";import{F as X}from"./FormAccess-DIV7UK1Y.js";const Y=({clientScope:o,save:I})=>{const{t:e}=k(),r=E({mode:"onChange"}),{control:m,handleSubmit:v,setValue:u,formState:p}=r,{isDirty:x,isValid:H}=p,{realm:C}=A(),d=L(),b=O()(N.DynamicScopes),y=g({control:m,name:n("attributes.display.on.consent.screen"),defaultValue:o?.attributes?.["display.on.consent.screen"]??"true"}),D=g({control:m,name:n("attributes.is.dynamic.scope"),defaultValue:"false"}),f=(t,s)=>u(n("attributes.dynamic.scope.regexp"),s?`${t}:*`:t,{shouldDirty:!0});return V(()=>{P(o??{},u)},[o]),a(X,{role:"manage-clients",onSubmit:v(I),isHorizontal:!0,children:l(W,{...r,children:[a(c,{name:"name",label:e("name"),labelIcon:e("scopeNameHelp"),rules:{required:{value:!0,message:e("required")},onChange:t=>{b&&f(t.target.validated,!0)}}}),b&&l(T,{children:[a(i,{name:n("attributes.is.dynamic.scope"),label:e("dynamicScope"),labelIcon:e("dynamicScopeHelp"),onChange:(t,s)=>{f(s&&r.getValues("name")||"",s)},stringify:!0}),D==="true"&&a(c,{name:n("attributes.dynamic.scope.regexp"),label:e("dynamicScopeFormat"),labelIcon:e("dynamicScopeFormatHelp"),isDisabled:!0})]}),a(S,{name:"description",label:e("description"),labelIcon:e("scopeDescriptionHelp"),rules:{maxLength:{value:255,message:e("maxLength")}}}),a(h,{id:"kc-type",name:"type",label:e("type"),labelIcon:e("scopeTypeHelp"),controller:{defaultValue:F[0]},options:F.map(t=>({key:t,value:e(`clientScopeType.${t}`)}))}),!o&&a(h,{id:"kc-protocol",name:"protocol",label:e("protocol"),labelIcon:e("protocolHelp"),controller:{defaultValue:d[0]},options:d.map(t=>({key:t,value:R(e,t)}))}),a(i,{name:n("attributes.display.on.consent.screen"),defaultValue:y,label:e("displayOnConsentScreen"),labelIcon:e("displayOnConsentScreenHelp"),stringify:!0}),y==="true"&&a(S,{name:n("attributes.consent.screen.text"),label:e("consentScreenText"),labelIcon:e("consentScreenTextHelp")}),a(i,{name:n("attributes.include.in.token.scope"),label:e("includeInTokenScope"),labelIcon:e("includeInTokenScopeHelp"),stringify:!0}),a(c,{name:n("attributes.gui.order"),label:e("guiOrder"),labelIcon:e("guiOrderHelp"),type:"number",min:0}),l(j,{children:[a(q,{formState:p,disabled:!x||!H,children:e("save")}),a(z,{variant:"link",component:t=>a(B,{...t,to:Q({realm:C})}),children:e("cancel")})]})]})})};export{Y as S};
//# sourceMappingURL=ScopeForm-BVEOue_R.js.map

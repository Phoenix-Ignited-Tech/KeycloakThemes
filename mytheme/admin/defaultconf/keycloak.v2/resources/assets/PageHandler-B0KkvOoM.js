import{jsx as t,jsxs as f}from"react/jsx-runtime";import{u as v,a as j,f as k,c as E,$ as F,C as O,P as R,r as w,F as x,A as D,h as p,L as _,t as B}from"./main-hZIJIVx9.js";import{useState as H}from"react";import{D as I}from"./DynamicComponents-v6e2RtHb.js";import{u as L}from"./useParams-tGf6FJmU.js";import{TAB_PROVIDER as u}from"./PageList-DUHf6xan.js";const q=({id:g,providerType:m,page:{id:o,...h}})=>{const{adminClient:r}=v(),{t:n}=j(),c=k(),{realm:P,realmRepresentation:y}=E(),{addAlert:S,addError:b}=F(),[i,d]=H(g),l=L();O(async()=>await Promise.all([i?r.components.findOne({id:i}):Promise.resolve(),m===u?r.components.find({type:u}):Promise.resolve()]),([a,s])=>{const e=(s||[]).find(C=>C.providerId===o);c.reset(a||e||{}),e&&d(e.id)},[]);const A=async a=>{(a.config||l)&&(a.config=Object.assign(a.config||{},l),Object.entries(a.config).forEach(([s,e])=>a.config[s]=Array.isArray(e)?e:[e]));try{const s={...a,providerId:o,providerType:m,parentId:y?.id};if(i)await r.components.update({id:i},s);else{const{id:e}=await r.components.create(s);d(e)}S(n("itemSaveSuccessful"))}catch(s){b("itemSaveError",s)}};return t(R,{variant:"light",children:f(w,{isHorizontal:!0,onSubmit:c.handleSubmit(A),className:"keycloak__form",children:[t(x,{...c,children:t(I,{properties:h.properties})}),f(D,{children:[t(p,{"data-testid":"save",type:"submit",children:n("save")}),t(p,{variant:"link",component:a=>t(_,{...a,to:B({realm:P,providerId:o})}),children:n("cancel")})]})]})})};export{q as P};
//# sourceMappingURL=PageHandler-B0KkvOoM.js.map

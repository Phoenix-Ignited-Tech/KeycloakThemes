import{jsxs as u,Fragment as L,jsx as l}from"react/jsx-runtime";import{useState as T}from"react";import{F as f}from"./FileUpload-DI2GSZLL.js";import{a as U,M as D,q as k,h as g,a_ as I,ew as R,c$ as b,d0 as w}from"./main-hZIJIVx9.js";import{C as y}from"./CodeEditor-BZUGCa3z.js";const S=({id:t,onChange:d,helpText:C="helpFileUpload",unWrap:s=!1,language:F,extension:x,...o})=>{const{t:n}=U(),c={value:"",filename:"",isLoading:!1,modal:!1},[e,a]=T(c),m=()=>a({...e,modal:!1}),p=(r,v)=>{a({...e,filename:v.name})},i=r=>{a({...e,value:r}),d(r)},h=()=>{a({...e,modal:!0})};return u(L,{children:[e.modal&&l(D,{variant:k.small,title:n("clearFile"),isOpen:!0,onClose:m,actions:[l(g,{variant:"primary","data-testid":"clear-button",onClick:()=>{a(c),d("")},children:n("clear")},"confirm"),l(g,{"data-testid":"cancel",variant:"link",onClick:m,children:n("cancel")},"cancel")],children:n("clearFileExplain")}),s&&l(f,{id:t,...o,type:"text",value:e.value,filename:e.filename,onFileInputChange:p,onDataChange:i,onTextChange:i,onClearClick:h,onReadStarted:()=>a({...e,isLoading:!0}),onReadFinished:()=>a({...e,isLoading:!1}),isLoading:e.isLoading,dropzoneProps:{accept:{"application/text":[x]}}}),!s&&u(I,{label:n("resourceFile"),fieldId:t,children:[l(f,{"data-testid":t,id:t,...o,type:"text",value:e.value,filename:e.filename,onFileInputChange:p,onDataChange:i,onTextChange:i,onClearClick:h,onReadStarted:()=>a({...e,isLoading:!0}),onReadFinished:()=>a({...e,isLoading:!1}),isLoading:e.isLoading,hideDefaultPreview:!0,children:!o.hideDefaultPreview&&l(y,{isLineNumbersVisible:!0,code:e.value,language:F,height:"128px",onChange:i,isReadOnly:!o.allowEditingUploadedText})}),l(R,{children:l(b,{children:l(w,{children:n(C)})})})]})]})};export{S as F};
//# sourceMappingURL=FileUploadForm-Tqz1ZjTZ.js.map

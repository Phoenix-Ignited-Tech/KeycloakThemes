import{jsx as r,jsxs as g}from"react/jsx-runtime";import{u as M,a as T,$ as B,C as P,aQ as I,M as N,q as S,h as u,B as k,aX as A,aL as j}from"./main-hZIJIVx9.js";import{useState as c}from"react";import{s as w}from"./sortBy-Dp9zHTFo.js";import{c as E,d as F,a as V,b as W,D as $}from"./Droppable-CwICnup7.js";import{d as q,D as z,a as H,b as Q,c as R}from"./DataListItemRow-B1CYYhSa.js";const Z=({orgId:m,hideRealmBasedIdps:h=!1,onClose:d})=>{const{adminClient:l}=M(),{t:e}=T(),{addAlert:f,addError:v}=B(),[C,s]=c(""),[p,L]=c(),[n,D]=c([]),x=({index:a})=>(s(e("onDragStart",{item:n[a]})),!0),b=({index:a})=>{s(e("onDragMove",{item:n[a]}))},O=(a,t)=>{if(t){const i=[...n],[o]=i.splice(a.index,1);return i.splice(t.index,0,o),s(e("onDragFinish",{list:i})),D(i),!0}else return s(e("onDragCancel")),!1};return P(()=>m?l.organizations.listIdentityProviders({orgId:m}):l.identityProviders.find({realmOnly:h}),a=>{L(a),D(w(a,["config.guiOrder","alias"]).map(t=>t.alias))},[]),p?g(N,{variant:S.small,title:e("manageDisplayOrder"),isOpen:!0,onClose:d,actions:[r(u,{id:"modal-confirm","data-testid":"confirm",onClick:async()=>{const a=n.map((t,i)=>{const o=p.find(y=>y.alias===t);return o.config.guiOrder=i,l.identityProviders.update({alias:t},o)});try{await Promise.all(a),f(e("orderChangeSuccess"))}catch(t){v("orderChangeError",t)}d()},children:e("save")},"confirm"),r(u,{id:"modal-cancel","data-testid":"cancel",variant:k.link,onClick:d,children:e("cancel")},"cancel")],children:[r(A,{className:"pf-v5-u-pb-lg",children:r(j,{children:e("orderDialogIntro")})}),r(E,{onDrag:x,onDragMove:b,onDrop:O,children:r(F,{hasNoWrapper:!0,children:r(q,{"aria-label":e("manageOrderTableAria"),"data-testid":"manageOrderDataList",isCompact:!0,children:n.map(a=>r(V,{hasNoWrapper:!0,children:r(z,{"aria-label":a,id:a,children:g(H,{children:[r(W,{children:r($,{"aria-label":e("dragHelp")})}),r(Q,{dataListCells:[r(R,{"data-testid":a,children:a},a)]})]})})},a))})})}),r("div",{className:"pf-v5-screen-reader","aria-live":"assertive",children:C})]}):r(I,{})};export{Z as M};
//# sourceMappingURL=ManageOrderDialog-Dl6-UDyO.js.map

import{jsxs as g,Fragment as y,jsx as t}from"react/jsx-runtime";import{u as F,a as D,d as S,$,c as C,B as w,j as h,aY as K,h as x,L as R,cM as k,bv as I,s as N,bY as V,dd as j,a$ as B}from"./main-hZIJIVx9.js";import{useState as E}from"react";import{t as P}from"./translationFormatter-QNso5xUZ.js";import{u as T}from"./ConfirmDialog-BClP8m2C.js";const Y=({defaultRoleName:c,toDetail:m,messageBundle:n,...a})=>{const{t:l}=D(n),{realm:d}=C(),{hasAccess:s,hasSomeAccess:i}=V(),e=s("view-realm")&&i("view-clients","manage-clients");return a.name!==c?t(R,{to:m(a.id),children:a.name}):g(y,{children:[e?t(R,{to:j({realm:d,tab:"user-registration"}),children:a.name}):t("span",{children:a.name}),t(B,{helpText:l(`${n}:defaultRole`),fieldLabelId:"defaultRole"})]})},H=({loader:c,paginated:m=!0,parentRoleId:n,messageBundle:a="roles",toCreate:l,toDetail:d,isReadOnly:s})=>{const{adminClient:i}=F(),{t:e}=D(),L=S(),{addAlert:f,addError:A}=$(),{realmRepresentation:u}=C(),[r,p]=E(),[b,v]=T({titleKey:"roleDeleteConfirm",messageKey:e("roleDeleteConfirmDialog",{selectedRoleName:r?r.name:""}),continueButtonLabel:"delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{n?await i.roles.delCompositeRoles({id:n},[r]):await i.roles.delById({id:r.id}),p(void 0),f(e("roleDeletedSuccess"),h.success)}catch(o){A("roleDeleteError",o)}}});return g(y,{children:[t(v,{}),t(K,{loader:c,ariaLabelKey:"roleList",searchPlaceholderKey:"searchForRoles",isPaginated:m,toolbarItem:!s&&t(x,{"data-testid":"create-role",component:o=>t(R,{...o,to:l}),children:e("createRole")}),actions:s?void 0:[{title:e("delete"),onRowClick:o=>{p(o),u?.defaultRole&&o.name===u.defaultRole.name?f(e("defaultRoleDeleteError"),h.danger):b()}}],columns:[{name:"name",displayKey:"roleName",cellRenderer:o=>t(Y,{...o,defaultRoleName:u?.defaultRole?.name,toDetail:d,messageBundle:a})},{name:"composite",displayKey:"composite",cellFormatters:[k(),I()]},{name:"description",cellFormatters:[P(e)]}],emptyState:t(N,{hasIcon:!0,message:e(`noRoles-${a}`),instructions:s?"":e(`noRolesInstructions-${a}`),primaryActionText:s?"":e("createRole"),onPrimaryAction:()=>L(l)})},r?r.id:"roleList")]})};export{H as R};
//# sourceMappingURL=RolesList-D8wodN8g.js.map

import{jsx as s,jsxs as n,Fragment as S}from"react/jsx-runtime";import{u as D,a as E,d as _,c as w,C as $,aQ as k,P as x,aJ as d,ct as g,aK as p,r as K,a_ as j,a$ as A,aR as G,b_ as H,b$ as R,c0 as b,c1 as f,c2 as B,c3 as u,L as M,c6 as C,eq as O}from"./main-hZIJIVx9.js";import{useState as T}from"react";import{u as U}from"./useLocaleSort-Cjd-LyWL.js";import{u as q}from"./ConfirmDialog-BClP8m2C.js";import{T as z}from"./Trans-CPgnEO0T.js";const Z=({id:a,type:l})=>{const{adminClient:r}=D(),{t:i}=E(),v=_(),{realm:o}=w(),[h,y]=T(""),[m,c]=T(),I=U(),P=e=>{switch(l){case"clients":return r.clients.updateFineGrainPermission({id:a},{enabled:e});case"users":return r.realms.updateUsersManagementPermissions({realm:o,enabled:e});case"groups":return r.groups.updatePermission({id:a},{enabled:e});case"roles":return r.roles.updatePermission({id:a},{enabled:e});case"identityProviders":return r.identityProviders.updatePermission({alias:a},{enabled:e})}};$(()=>Promise.all([r.clients.find({search:!0,clientId:o==="master"?"master-realm":"realm-management"}),(()=>{switch(l){case"clients":return r.clients.listFineGrainPermissions({id:a});case"users":return r.realms.getUsersManagementPermissions({realm:o});case"groups":return r.groups.listPermissions({id:a});case"roles":return r.roles.listPermissions({id:a});case"identityProviders":return r.identityProviders.listPermissions({alias:a})}})()]),([e,t])=>{y(e[0]?.id),c(t)},[a]);const[N,F]=q({titleKey:"permissionsDisable",messageKey:"permissionsDisableConfirm",continueButtonLabel:"confirm",onConfirm:async()=>{const e=await P(!1);c(e)}});return m?n(x,{variant:"light",children:[s(F,{}),n(d,{isFlat:!0,children:[s(g,{children:i("permissions")}),n(p,{children:[i(`${l}PermissionsHint`),s(K,{isHorizontal:!0,className:"pf-v5-u-pt-md",children:s(j,{hasNoPaddingTop:!0,className:"permission-label",label:i("permissionsEnabled"),fieldId:"permissionsEnabled",labelIcon:s(A,{helpText:i("permissionsEnabledHelp"),fieldLabelId:"permissionsEnabled"}),children:s(G,{id:"permissionsEnabled","data-testid":"permissionSwitch",label:i("on"),labelOff:i("off"),isChecked:m.enabled,onChange:async(e,t)=>{if(t){const L=await P(t);c(L)}else N()},"aria-label":i("permissionsEnabled")})})})]})]}),m.enabled&&n(S,{children:[n(d,{isFlat:!0,className:"pf-v5-u-mt-lg",children:[s(g,{children:i("permissionsList")}),s(p,{children:n(z,{i18nKey:"permissionsListIntro",children:[" ",s("strong",{children:{realm:o==="master"?"master-realm":"realm-management"}}),"."]})})]}),s(d,{isFlat:!0,className:"keycloak__permission__permission-table",children:s(p,{className:"pf-v5-u-p-0",children:n(H,{"aria-label":i("permissionsList"),variant:"compact",children:[s(R,{children:n(b,{children:[s(f,{id:"permissionsScopeName",children:i("permissionsScopeName")}),s(f,{id:"description",children:i("description")})]})}),s(B,{children:I(Object.entries(m.scopePermissions||{}),([e])=>e).map(([e,t])=>n(b,{children:[s(u,{children:s(M,{to:C({realm:o,id:h,permissionType:"scope",permissionId:t}),children:e})}),s(u,{children:i(`scopePermissions.${l}.${e}-description`)}),s(u,{isActionCell:!0,children:s(O,{items:[{title:i("edit"),onClick(){v(C({realm:o,id:h,permissionType:"scope",permissionId:t}))}}]})})]},t))})]})})})]})]}):s(k,{})};export{Z as P};
//# sourceMappingURL=PermissionTab-CKSyLWea.js.map

import{jsxs as n,jsx as e}from"react/jsx-runtime";import{useState as A}from"react";import{a as u,M as T,q as g,bq as C,j as p,r as y,a_ as S,u as V,f as x,c as F,$ as I,d as H,F as j,bJ as m,P as D,b1 as w,A as E,h as d,L as M}from"./main-hZIJIVx9.js";import{b as N,F as P}from"./FormAccess-DIV7UK1Y.js";import{T as q}from"./TimeSelectorControl-BgeQYM1k.js";import{V as G}from"./ViewHeader-DxK8RzXz.js";import"react-dom";import"./copy-icon-Cy7M-mD5.js";import"./TimeSelector-BQoPDF1p.js";const K=({token:i,toggleDialog:a})=>{const{t}=u();return n(T,{title:t("initialAccessTokenDetails"),isOpen:!0,onClose:a,variant:g.medium,children:[e(C,{title:t("copyInitialAccessToken"),component:"h2",isInline:!0,variant:p.warning}),e(y,{className:"pf-v5-u-mt-md",children:e(S,{label:t("initialAccessToken"),fieldId:"initialAccessToken",children:e(N,{id:"initialAccessToken",isReadOnly:!0,children:i})})})]})};function W(){const{adminClient:i}=V(),{t:a}=u(),t=x({mode:"onChange"}),{handleSubmit:k,formState:{isValid:b}}=t,{realm:s}=F(),{addAlert:h,addError:v}=I(),f=H(),[l,c]=A("");return n(j,{...t,children:[l&&e(K,{token:l,toggleDialog:()=>{c(""),h(a("tokenSaveSuccess"),p.success),f(m({realm:s,tab:"initial-access-token"}))}}),e(G,{titleKey:"createToken",subKey:"createTokenHelp"}),e(D,{variant:"light",children:n(P,{isHorizontal:!0,role:"create-client",onSubmit:k(async o=>{try{const r=await i.realms.createClientsInitialAccess({realm:s},o);c(r.token)}catch(r){v("tokenSaveError",r)}}),children:[e(q,{name:"expiration",label:a("expiration"),labelIcon:a("tokenExpirationHelp"),controller:{defaultValue:86400,rules:{min:{value:1,message:a("expirationValueNotValid")}}}}),e(w,{name:"count",label:a("count"),labelIcon:a("countHelp"),controller:{rules:{min:1},defaultValue:1}}),n(E,{children:[e(d,{variant:"primary",type:"submit","data-testid":"save",isDisabled:!b,children:a("save")}),e(d,{"data-testid":"cancel",variant:"link",component:o=>e(M,{...o,to:m({realm:s,tab:"initial-access-token"})}),children:a("cancel")})]})]})})]})}export{W as default};
//# sourceMappingURL=CreateInitialAccessToken-B2h2tS0S.js.map

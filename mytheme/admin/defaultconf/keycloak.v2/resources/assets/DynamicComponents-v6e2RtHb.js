import{jsx as t,jsxs as S,Fragment as E}from"react/jsx-runtime";import{a as C,b5 as y,a_ as I,a$ as v,b0 as k,aR as W,cb as z,cc as F,b2 as Z,b3 as U,h as R,c4 as B,c5 as D,aG as K,dT as G,v as V,x,b8 as q,bb as H,bh as O,be as X,bi as Y,bj as ee,cr as te,b6 as ne,b7 as P,bc as J,Q as ae,dU as le,aZ as oe,u as re,C as se,bC as ie}from"./main-hZIJIVx9.js";import{C as ce}from"./ClientSelect-9QE6UUYG.js";import{useState as T,useEffect as de}from"react";import{F as ue}from"./FileUpload-DI2GSZLL.js";import{G as pe}from"./GroupPickerDialog-CppD_q_3.js";import{A as he,a as me,K as fe}from"./KeySelect-BUhUx10e.js";import{M as ge}from"./MultiLineInput-DThNyrNa.js";import{u as Ce}from"./useToggle-K3Kx99tM.js";import{A as be,S as Ie}from"./AddRoleMappingModal-C4wZesy5.js";import{C as ve,L as ye}from"./CodeEditor-BZUGCa3z.js";import{F as Se}from"./ViewHeader-DxK8RzXz.js";const Le=({name:e,label:n,helpText:s,isDisabled:o=!1,defaultValue:r,isNew:l=!0})=>{const{t:a}=C(),{control:u}=y();return t(I,{hasNoPaddingTop:!0,label:a(n),fieldId:e,labelIcon:t(v,{helpText:a(s),fieldLabelId:`${n}`}),children:t(k,{name:b(e),"data-testid":e,defaultValue:l?r:!1,control:u,render:({field:c})=>t(W,{id:e,isDisabled:o,label:a("on"),labelOff:a("off"),isChecked:c.value==="true"||c.value===!0||c.value?.[0]==="true",onChange:(p,h)=>c.onChange(""+h),"data-testid":e,"aria-label":a(n)})})})},Te=e=>t(ce,{...e,name:b(e.name)}),$e=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),{control:u}=y(),[c,p]=T(""),[h,d]=T(!1);return t(I,{label:a(n),labelIcon:t(v,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:t(k,{name:b(e),control:u,defaultValue:o||"",render:({field:i})=>t(ue,{id:e,value:i.value,type:"text",filename:c,isDisabled:l,onFileInputChange:(g,L)=>p(L.name),onReadStarted:()=>d(!0),onReadFinished:()=>d(!1),onClearClick:()=>{i.onChange(""),p("")},isLoading:h,allowEditingUploadedText:!1,onChange:(g,L)=>{i.onChange(g),p(L)}})})})},ke=({name:e,label:n,helpText:s,required:o})=>{const{t:r}=C(),[l,a]=T(!1),[u,c]=T(),{control:p}=y();return t(k,{name:b(e),defaultValue:"",control:p,render:({field:h})=>S(E,{children:[l&&t(pe,{type:"selectOne",text:{title:"selectGroup",ok:"select"},onConfirm:d=>{h.onChange(d?.[0].path),c(d),a(!1)},onClose:()=>a(!1),filterGroups:u}),t(I,{label:r(n),labelIcon:t(v,{helpText:r(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:S(z,{children:[t(F,{children:t(Z,{children:h.value&&t(U,{onClick:()=>h.onChange(void 0),children:h.value})})}),t(F,{children:t(R,{id:"kc-join-groups-button",onClick:()=>a(!l),variant:"secondary","data-testid":"join-groups-button",children:r("selectGroup")})})]})})]})})},we=({name:e,label:n,helpText:s,defaultValue:o,options:r,required:l,isDisabled:a=!1})=>{const{t:u}=C(),{control:c}=y(),[p,h]=T(!1);return t(I,{label:u(n),labelIcon:t(v,{helpText:u(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(k,{name:b(e),"data-testid":e,defaultValue:o||r?.[0]||"",control:c,render:({field:d})=>t(B,{toggleId:e,isDisabled:a,onToggle:i=>h(i),onSelect:i=>{d.onChange(i),h(!1)},selections:d.value,variant:D.single,"aria-label":u(n),isOpen:p,children:r?.map(i=>t(K,{selected:i===d.value,value:i,children:i},i))})})})},xe=({name:e,label:n,helpText:s,required:o,isDisabled:r})=>{const{t:l}=C(),{getValues:a,setValue:u,register:c}=y(),[p,h]=T([]),d=b(e);de(()=>{c(d);const f=JSON.parse(a(d)||"[]");h(f.map(m=>({...m,id:G()})))},[]);const i=()=>h([...p,{key:"",value:"",id:G()}]),g=(f=p)=>{u(d,JSON.stringify(f.filter(m=>m.key!=="").map(({id:m,...M})=>M)))},L=(f,m)=>{$(f,{...p[f],key:m})},w=(f,m)=>{$(f,{...p[f],value:m})},$=(f,m)=>h([...p.slice(0,f),m,...p.slice(f+1)]),A=f=>{const m=[...p.slice(0,f),...p.slice(f+1)];h(m),g(m)};return p.length!==0?S(I,{label:l(n),labelIcon:t(v,{helpText:l(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:[S(V,{direction:{default:"column"},children:[S(V,{children:[t(x,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t("strong",{children:l("key")})}),t(x,{grow:{default:"grow"},children:t("strong",{children:l("value")})})]}),p.map((f,m)=>S(V,{"data-testid":"row",children:[t(x,{grow:{default:"grow"},children:t(q,{name:`${d}.${m}.key`,placeholder:l("keyPlaceholder"),"aria-label":l("key"),defaultValue:f.key,"data-testid":`${d}.${m}.key`,onChange:(M,N)=>L(m,N),onBlur:()=>g()})}),t(x,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t(q,{name:`${d}.${m}.value`,placeholder:l("valuePlaceholder"),"aria-label":l("value"),defaultValue:f.value,"data-testid":`${d}.${m}.value`,onChange:(M,N)=>w(m,N),onBlur:()=>g()})}),t(x,{children:t(R,{variant:"link",title:l("removeAttribute"),isDisabled:r,onClick:()=>A(m),"data-testid":`${d}.${m}.remove`,children:t(H,{})})})]},f.id))]}),t(he,{children:t(me,{children:t(R,{"data-testid":`${d}-add-row`,className:"pf-v5-u-px-0 pf-v5-u-mt-sm",variant:"link",icon:t(O,{}),onClick:()=>i(),children:l("addAttribute",{label:n})})})})]}):S(X,{"data-testid":`${e}-empty-state`,className:"pf-v5-u-p-0",variant:"xs",children:[t(Y,{children:l("missingAttributes",{label:n})}),t(ee,{children:t(R,{"data-testid":`${e}-add-row`,variant:"link",icon:t(O,{}),size:"sm",onClick:i,isDisabled:r,children:l("addAttribute",{label:n})})})]})};function _(e){return typeof e=="string"&&e.length>0?e.split("##"):[]}function Re(e){return e.join("##")}const Ae=({name:e,label:n,helpText:s,defaultValue:o,options:r,isDisabled:l=!1,stringify:a,required:u})=>{const{t:c}=C(),{control:p}=y(),[h,d]=T(!1);return t(I,{label:c(n),labelIcon:t(v,{helpText:c(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:u,children:t(k,{name:b(e),control:p,defaultValue:a?o||"":o?[o]:[],render:({field:i})=>t(B,{toggleId:e,"data-testid":e,isDisabled:l,chipGroupProps:{numChips:3,expandedText:c("hide"),collapsedText:c("showRemaining")},variant:D.typeaheadMulti,typeAheadAriaLabel:"Select",onToggle:g=>d(g),selections:a?_(i.value):i.value,onSelect:g=>{const L=g.toString(),w=a?_(i.value):i.value;let $;w.includes(L)?$=w.filter(A=>A!==L):$=[...w,L],i.onChange(a?Re($):$)},onClear:()=>{i.onChange(a?"":[])},isOpen:h,"aria-label":c(n),children:r?.map(g=>t(K,{value:g,children:g},g))})})})};function Me(e){return e&&Array.isArray(e)?e:[e]}const Ne=({name:e,label:n,defaultValue:s,helpText:o,stringify:r,required:l,isDisabled:a=!1})=>{const{t:u}=C(),c=b(e);return t(I,{label:u(n),labelIcon:t(v,{helpText:u(o),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(ge,{"aria-label":u(n),name:c,isDisabled:a,defaultValue:Me(s),addButtonLabel:u("addMultivaluedLabel",{fieldLabel:u(n).toLowerCase()}),stringify:r})})},Ve=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C();return t(te,{name:b(e),label:a(n),labelIcon:a(s),isDisabled:l,defaultValue:o?.toString(),rules:{required:{value:!!r,message:a("required")}}})},j=e=>e?.includes(".")?e.split("."):["",e||""],Fe=e=>e.client?.clientId?`${e.client.clientId}.${e.role.name}`:e.role.name,Ge=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),[u,c]=Ce(),{control:p,formState:{errors:h}}=y(),d=b(e);return S(I,{label:a(n),labelIcon:t(v,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:[t(k,{name:d,defaultValue:o||"",control:p,render:({field:i})=>S(ne,{children:[u&&t(be,{id:"id",type:"roles",name:e,onAssign:g=>i.onChange(Fe(g[0])),onClose:c,isRadio:!0}),i.value!==""&&t(P,{children:t(U,{textMaxWidth:"500px",onClick:()=>i.onChange(""),children:t(Ie,{role:{name:j(i.value)[1]},client:{clientId:j(i.value)[0]}})})}),t(P,{children:t(R,{onClick:c,variant:"secondary","data-testid":"add-roles",disabled:l,children:a("selectRole.label")})})]})}),h[d]&&t(J,{message:a("required")})]})},qe=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),{control:u}=y();return t(I,{label:a(n),labelIcon:t(v,{helpText:t("span",{style:{whiteSpace:"pre-wrap"},children:s}),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:t(k,{name:b(e),defaultValue:o,control:u,render:({field:c})=>t(ve,{id:e,"data-testid":e,isReadOnly:l,type:"text",onChange:c.onChange,code:Array.isArray(c.value)?c.value[0]:c.value,height:"600px",language:ye.javascript})})})},Oe=({name:e,label:n,helpText:s,...o})=>{const{t:r}=C();return t(ae,{name:b(e),label:r(n),labelIcon:r(s),"data-testid":e,...o})},Pe=({name:e,label:n,helpText:s,defaultValue:o,required:r,isDisabled:l=!1})=>{const{t:a}=C(),{register:u}=y();return t(I,{label:a(n),labelIcon:t(v,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,required:r,children:t(le,{id:e,"data-testid":e,isDisabled:l,defaultValue:o?.toString(),...u(b(e))})})},_e=({name:e,label:n,helpText:s})=>{const{t:o}=C(),{control:r}=y(),{value:l}=oe({control:r,name:e,defaultValue:""});return t(I,{label:o(n),fieldId:e,labelIcon:t(v,{helpText:o(s),fieldLabelId:`${n}`}),className:"keycloak__identity-providers__url_component",children:t(Se,{title:o(s),href:l,isInline:!0})})},je=({name:e,label:n,helpText:s,required:o=!1})=>{const{adminClient:r}=re(),{t:l}=C(),{formState:{errors:a}}=y(),[u,c]=T(),p=b(e);se(()=>r.users.getProfile(),d=>c(d),[]);const h=d=>d?.attributes?d.attributes.map(i=>({key:i.name,label:i.name})):[];return u?S(I,{label:l(n),isRequired:o,labelIcon:t(v,{helpText:l(s),fieldLabelId:n}),fieldId:p,children:[t(fe,{name:p,rules:o?{required:!0}:{},selectItems:h(u)}),a[p]&&t(J,{message:l("required")})]}):null},Q={String:Oe,Text:Pe,boolean:Le,List:we,Role:Ge,Script:qe,Map:xe,Group:ke,ClientList:Te,UserProfileAttributeList:je,MultivaluedList:Ae,MultivaluedString:Ne,File:$e,Password:Ve,Url:_e},Ee=e=>e in Q,et=({properties:e,...n})=>t(E,{children:e.map(s=>{const o=s.type;if(Ee(o)){const r=Q[o];return t(r,{...s,...n},s.name)}else console.warn(`There is no editor registered for ${o}`)})}),b=e=>ie(`config.${e}`);export{et as D,b as c};
//# sourceMappingURL=DynamicComponents-v6e2RtHb.js.map

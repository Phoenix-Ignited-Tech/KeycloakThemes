import{jsxs as h,Fragment as y,jsx as e}from"react/jsx-runtime";import{u as M,a as x,e as P,d as S,$ as O,c as K,b5 as W,B as $,j as w,eZ as U,b0 as p,D as Y,T as z,aX as B,aL as X,aZ as j,a_ as I,a$ as T,c4 as V,c5 as k,aG as l,W as q,ba as R}from"./main-hZIJIVx9.js";import{u as F}from"./ConfirmDialog-BClP8m2C.js";import{V as H}from"./ViewHeader-DxK8RzXz.js";import{F as G}from"./FormAccess-DIV7UK1Y.js";import{u as _}from"./useToggle-K3Kx99tM.js";import{i as D}from"./isEqual-BKyM3i3m.js";const ie=({provider:t,save:n,noDivider:i=!1,dropdownItems:r=[]})=>{const{adminClient:s}=M(),{t:u}=x(),{id:f}=P(),C=S(),{addAlert:d,addError:b}=O(),{realm:g}=K(),{control:E,setValue:m}=W(),[a,o]=F({titleKey:"userFedDisableConfirmTitle",messageKey:"userFedDisableConfirm",continueButtonLabel:"disable",onConfirm:()=>{m("config.enabled[0]","false"),n()}}),[L,v]=F({titleKey:"userFedDeleteConfirmTitle",messageKey:"userFedDeleteConfirm",continueButtonLabel:"delete",continueButtonVariant:$.danger,onConfirm:async()=>{try{await s.components.del({id:f}),d(u("userFedDeletedSuccess"),w.success),C(U({realm:g}),{replace:!0})}catch(c){b("userFedDeleteError",c)}}});return h(y,{children:[e(o,{}),e(v,{}),e(p,{name:"config.enabled",defaultValue:["true"],control:E,render:({field:c})=>f?e(H,{divider:!i,titleKey:t,dropdownItems:[...r,e(Y,{onClick:()=>L(),"data-testid":"delete-cmd",children:u("deleteProvider")},"delete")],isEnabled:c.value?.[0]==="true"||c.value==="true",onToggle:A=>{A?(c.onChange([A.toString()]),n()):a()}}):e(H,{titleKey:u("addProvider",{provider:t,count:1})})})]})},Z=({title:t,description:n,showDescription:i=!1})=>h(y,{children:[e(z,{size:"xl",headingLevel:"h2",className:i?"kc-wizard-section-header__title--has-description":"kc-wizard-section-header__title",children:t}),i&&e(B,{className:"kc-wizard-section-header__description",children:e(X,{children:n})})]}),N=({form:t})=>{const{t:n}=x(),[i,r]=_(),[s,u]=_(),[f,C]=_(),d=j({control:t.control,name:"config.cachePolicy"}),b=[e(l,{value:["0"],children:["00"]},0)];let g="";for(let a=1;a<24;a++)a<10?g=`0${a}`:g=`${a}`,b.push(e(l,{value:[`${a}`],children:g},a));const E=[e(l,{value:["0"],children:["00"]},0)];let m="";for(let a=1;a<60;a++)a<10?m=`0${a}`:m=`${a}`,E.push(e(l,{value:[`${a}`],children:m},a));return h(y,{children:[e(I,{label:n("cachePolicy"),labelIcon:e(T,{helpText:n("cachePolicyHelp"),fieldLabelId:"cachePolicy"}),fieldId:"kc-cache-policy",children:e(p,{name:"config.cachePolicy",defaultValue:["DEFAULT"],control:t.control,render:({field:a})=>h(V,{toggleId:"kc-cache-policy",onToggle:r,isOpen:i,onSelect:o=>{a.onChange(o),r()},selections:a.value,variant:k.single,"data-testid":"kerberos-cache-policy","aria-label":n("selectCachePolicy"),children:[e(l,{value:["DEFAULT"],children:"DEFAULT"},0),e(l,{value:["EVICT_DAILY"],children:"EVICT_DAILY"},1),e(l,{value:["EVICT_WEEKLY"],children:"EVICT_WEEKLY"},2),e(l,{value:["MAX_LIFESPAN"],children:"MAX_LIFESPAN"},3),e(l,{value:["NO_CACHE"],children:"NO_CACHE"},4)]})})}),D(d,["EVICT_WEEKLY"])?e(q,{id:"kc-eviction-day",name:"config.evictionDay[0]",label:n("evictionDay"),labelIcon:n("evictionDayHelp"),controller:{defaultValue:"1"},"aria-label":n("selectEvictionDay"),options:[{key:"1",value:n("Sunday")},{key:"2",value:n("Monday")},{key:"3",value:n("Tuesday")},{key:"4",value:n("Wednesday")},{key:"5",value:n("Thursday")},{key:"6",value:n("Friday")},{key:"7",value:n("Saturday")}]}):null,D(d,["EVICT_DAILY"])||D(d,["EVICT_WEEKLY"])?h(y,{children:[e(I,{label:n("evictionHour"),labelIcon:e(T,{helpText:n("evictionHourHelp"),fieldLabelId:"evictionHour"}),isRequired:!0,fieldId:"kc-eviction-hour",children:e(p,{name:"config.evictionHour",defaultValue:["0"],control:t.control,render:({field:a})=>e(V,{toggleId:"kc-eviction-hour",onToggle:u,isOpen:s,onSelect:o=>{a.onChange(o),u()},selections:a.value,variant:k.single,"aria-label":n("selectEvictionHour"),children:b})})}),e(I,{label:n("evictionMinute"),labelIcon:e(T,{helpText:n("evictionMinuteHelp"),fieldLabelId:"evictionMinute"}),isRequired:!0,fieldId:"kc-eviction-minute",children:e(p,{name:"config.evictionMinute",defaultValue:["0"],control:t.control,render:({field:a})=>e(V,{toggleId:"kc-eviction-minute",onToggle:C,isOpen:f,onSelect:o=>{a.onChange(o),C()},selections:a.value,variant:k.single,"aria-label":n("selectEvictionMinute"),children:E})})})]}):null,D(d,["MAX_LIFESPAN"])?e(I,{label:n("maxLifespan"),labelIcon:e(T,{helpText:n("maxLifespanHelp"),fieldLabelId:"maxLifespan"}),fieldId:"kc-max-lifespan",children:e(p,{name:"config.maxLifespan[0]",defaultValue:0,control:t.control,render:({field:a})=>{const L=v=>a.onChange(Math.max(v,0));return e(R,{id:"kc-max-lifespan","data-testid":"kerberos-cache-lifespan",value:a.value,min:0,unit:n("ms"),type:"text",onPlus:()=>a.onChange(Number(a.value)+1),onMinus:()=>a.onChange(Number(a.value)-1),onChange:v=>{const c=Number(v.currentTarget.value);L(isNaN(c)?0:c)}})}})}):null]})},oe=({form:t,showSectionHeading:n=!1,showSectionDescription:i=!1,unWrap:r=!1})=>{const{t:s}=x();return h(y,{children:[n&&e(Z,{title:s("cacheSettings"),description:s("cacheSettingsDescription"),showDescription:i}),r?e(N,{form:t}):e(G,{role:"manage-realm",isHorizontal:!0,children:e(N,{form:t})})]})};export{ie as H,oe as S,Z as W};
//# sourceMappingURL=SettingsCache-DGmyWWgw.js.map

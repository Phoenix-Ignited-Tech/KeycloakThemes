import{jsx as t,jsxs as v,Fragment as w}from"react/jsx-runtime";import{u as x,a as y,$ as A,d as E,c as F,f as P,C as V,aQ as b,P as j,j as G,cy as N,fm as R,fn as M}from"./main-hZIJIVx9.js";import{useState as l}from"react";import{V as S}from"./ViewHeader-DxK8RzXz.js";import{U as $,t as k}from"./UserForm-Cy_IbmvP.js";/* empty css                     */import"react-dom";import"./SwitchControl-CuqH9Ng4.js";import"./FormAccess-DIV7UK1Y.js";import"./copy-icon-Cy7M-mD5.js";import"./GroupPickerDialog-CppD_q_3.js";import"./DataListItemRow-B1CYYhSa.js";import"./useFormatDate-wmPxp-7e.js";function X(){const{adminClient:i}=x(),{t:r}=y(),{addAlert:c,addError:u}=A(),p=E(),{realm:m,realmRepresentation:s}=F(),o=P({mode:"onChange"}),[f,g]=l([]),[d,U]=l();V(()=>i.users.getProfileMetadata({realm:m}),a=>{if(!a)throw new Error(r("notFound"));o.setValue("attributes.locale",s?.defaultLocale||""),U(a)},[]);const h=async a=>{try{const e=await i.users.create({...k(a),groups:f.map(n=>n.path),enabled:!0});c(r("userCreated"),G.success),p(N({id:e.id,realm:m,tab:"settings"}))}catch(e){R(e)?M(e,o.setError,(n,C)=>r(n,C)):u("userCreateError",e)}};return!s||!d?t(b,{}):v(w,{children:[t(S,{titleKey:r("createUser"),className:"kc-username-view-header"}),t(j,{variant:"light",children:t($,{form:o,realm:s,userProfileMetadata:d,onGroupsUpdate:g,save:h})})]})}export{X as default};
//# sourceMappingURL=CreateUser-BO5SeQki.js.map

import{jsx as e,jsxs as n,Fragment as N}from"react/jsx-runtime";import{useState as q,useMemo as x,Fragment as F}from"react";import{a as I,bU as T,c4 as P,aG as w,b8 as m,b5 as G,bZ as j,aZ as O,cv as B,cw as d,c$ as b,d0 as $,h as v,bb as H,bh as g,be as L,bi as M,bj as R}from"./main-hZIJIVx9.js";import{K as U,A as Z,a as z}from"./KeySelect-BUhUx10e.js";const K=({selectItems:t,keyValue:c,...l})=>{const{t:s}=I(),{field:r}=T(l),[u,i]=q(!1),p=x(()=>t.find(a=>a.key===c),[t,c]);return p?.values?e(P,{onToggle:a=>i(a),isOpen:u,onSelect:a=>{r.onChange(a),i(!1)},selections:r.value?[r.value]:s("choose"),placeholderText:s("valuePlaceholder"),children:p.values.map(a=>e(w,{value:a,children:a},a))}):e(m,{"aria-label":s("customValue"),"data-testid":l.name,...r})},X=({name:t,label:c="attributes",defaultKeyValue:l,isDisabled:s=!1})=>{const{t:r}=I(),{control:u,register:i,formState:{errors:p}}=G(),{fields:a,append:S,remove:A}=j({shouldUnregister:!0,control:u,name:t}),f=()=>S({key:"",value:""}),C=O({name:t,control:u,defaultValue:[]});return a.length>0?n(N,{children:[n(B,{hasGutter:!0,children:[e(d,{className:"pf-v5-c-form__label",span:5,children:e("span",{className:"pf-v5-c-form__label-text",children:r("key")})}),e(d,{className:"pf-v5-c-form__label",span:7,children:e("span",{className:"pf-v5-c-form__label-text",children:r("value")})}),a.map((E,o)=>{const h=p[t]?.[o],k=!!h?.key,y=!!h?.value||!!h?.message,_=h?.message||r("valueError");return n(F,{children:[n(d,{span:5,children:[l?e(U,{name:`${t}.${o}.key`,selectItems:l,rules:{required:!0}}):e(m,{placeholder:r("keyPlaceholder"),"aria-label":r("key"),"data-testid":`${t}-key`,...i(`${t}.${o}.key`,{required:!0}),validated:k?"error":"default",isRequired:!0,isDisabled:s}),k&&e(b,{children:e($,{variant:"error",children:r("keyError")})})]}),n(d,{span:5,children:[l?e(K,{name:`${t}.${o}.value`,keyValue:C[o]?.key,selectItems:l,rules:{required:!0}}):e(m,{placeholder:r("valuePlaceholder"),"aria-label":r("value"),"data-testid":`${t}-value`,...i(`${t}.${o}.value`,{required:!0}),validated:y?"error":"default",isRequired:!0,isDisabled:s}),y&&e(b,{children:e($,{variant:"error",children:_})})]}),e(d,{span:2,children:e(v,{variant:"link",title:r("removeAttribute"),onClick:()=>A(o),"data-testid":`${t}-remove`,isDisabled:s,children:e(H,{})})})]},E.id)})]}),e(Z,{children:e(z,{children:e(v,{"data-testid":`${t}-add-row`,className:"pf-v5-u-px-0 pf-v5-u-mt-sm",variant:"link",icon:e(g,{}),onClick:f,isDisabled:s,children:r("addAttribute",{label:c})})})})]}):n(L,{"data-testid":`${t}-empty-state`,className:"pf-v5-u-p-0",variant:"xs",children:[e(M,{children:r("missingAttributes",{label:c})}),e(R,{children:e(v,{"data-testid":`${t}-add-row`,variant:"link",icon:e(g,{}),size:"sm",onClick:f,isDisabled:s,children:r("addAttribute",{label:c})})})]})};export{X as K};
//# sourceMappingURL=KeyValueInput-CYwzrckm.js.map
